<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Abra Programming Language</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Abra Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/anandrav/abra" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="about-abra"><a class="header" href="#about-abra">About Abra</a></h1>
<p>Abra aims to be the most <strong>user-friendly</strong> programming language.</p>
<p>More specifically, Abra is optimized for these use cases:</p>
<ol>
<li>Giving beginners a gentle introduction to programming</li>
<li>Allowing experienced programmers to prototype quickly</li>
</ol>
<p>Some noteworthy features that support these use cases include:</p>
<h3 id="hindley-milner-type-system"><a class="header" href="#hindley-milner-type-system">Hindley-Milner Type System</a></h3>
<p>Abra is a statically-typed language with Hindley-Milner type inference. Types help programmers avoid bugs by catching errors at compile time. At the same time, type inference saves programmers time by removing the need for type annotations everywhere.</p>
<h3 id="garbage-collection"><a class="header" href="#garbage-collection">Garbage Collection</a></h3>
<p>Abra is garbage-collected, so programmers don't have to manually manage memory themselves, and they can save brainpower for other aspects of their program instead.</p>
<h3 id="adhoc-polymorphism"><a class="header" href="#adhoc-polymorphism">Adhoc Polymorphism</a></h3>
<p>In addition, Abra has a concept of "interfaces" which is very similar to "traits" in Rust or "typeclasses" in Haskell. These enable programmers to use the '+' operator on both integers and floats, or print several kinds of datatypes without having to use separate functions for each (print() as opposed to print_string(), print_int(), print_float() etc.)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>To install Abra, download the repository from https://github.com/anandrav/abra.
Then, run the script located at /scripts/install</p>
<pre><code>git clone https://github.com/anandrav/abra
cd abra
./scripts/install
</code></pre>
<p>After, you should be able to run Abra from the command line</p>
<pre><code>% abra --help
Usage: abra [OPTIONS] &lt;FILE&gt; [ARGS]...

Arguments:
  &lt;FILE&gt;     The main Abra file to compile and execute
  [ARGS]...  Arguments to pass to the Abra program

Options:
  -m, --modules &lt;DIRECTORY&gt;  Override the default module directory (~/.abra/modules).
  -h, --help                 Print help
  -V, --version              Print version

</code></pre>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<h3 id="cargo"><a class="header" href="#cargo">Cargo</a></h3>
<p>Cargo, the Rust package manager, is required to run the install script. The best way to install Cargo is by using <a href="https://www.rust-lang.org/tools/install">rustup</a>.</p>
<h3 id="node"><a class="header" href="#node">Node</a></h3>
<p>If you're using Visual Studio Code and want to install the Abra extension, you'll want to <a href="https://nodejs.org/en/download/package-manager">install Node</a> as well before running the install script.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-world"><a class="header" href="#hello-world">Hello World</a></h1>
<p>To make a simple hello world program, create a file called <code>hello.abra</code>.</p>
<p>Inside the file, write</p>
<pre><code>print("hello world")
</code></pre>
<p>Then run the file with the command <code>abra hello.abra</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="primitive-types"><a class="header" href="#primitive-types">Primitive Types</a></h1>
<h3 id="int"><a class="header" href="#int">int</a></h3>
<p>A 64-bit signed integer.</p>
<h3 id="float"><a class="header" href="#float">float</a></h3>
<p>A 64-bit floating point decimal number.</p>
<h3 id="boolean"><a class="header" href="#boolean">boolean</a></h3>
<p>Either <code>true</code> or <code>false</code>.</p>
<h3 id="string"><a class="header" href="#string">string</a></h3>
<p>Garbage-collected unicode text data.</p>
<h3 id="void"><a class="header" href="#void">void</a></h3>
<p>Represents nothing and only has one value -- void. Similar to the unit type <code>()</code> in Rust.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<p>A function takes 0 or more arguments and returns a single value.</p>
<pre><code>fn increment_if_true(n: int, condition: boolean) -&gt; int {
    if condition {
        n + 1
    } else {
        n
    }
}
</code></pre>
<p>A function always returns the value of its body. If the body of a function is a block of statements, the last statement/expression of the block is the return value of the function. There are no explicit return statements and therefore no early return statements.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="structs"><a class="header" href="#structs">Structs</a></h1>
<p>Define a <code>struct</code> to group together related pieces of data.</p>
<pre><code>type Person = {
    first_name: string,
    last_name: string,
    age: int,
}
</code></pre>
<p>Create an instance of a struct by calling the struct as a function.</p>
<pre><code>let frank = Person("Frank", "Smith", 34)
</code></pre>
<p>Access members of a struct and modify them by using dot <code>.</code> syntax.</p>
<pre><code>let fullname = frank.first_name &amp; " " &amp; frank.last_name
frank.age = frank.age + 1
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="enums"><a class="header" href="#enums">Enums</a></h2>
<p>Define an <code>enum</code> to represent a set of possibilities.</p>
<pre><code>type Color =
    Red
  | Blue
  | Green
</code></pre>
<p>Data can optionally be associated with each variant of an enum type.</p>
<pre><code>type Shape =
    | Circle(float)
    | Rectangle(float, float)
    | Triangle(float, float)
</code></pre>
<p>Given an enum, its value can be inspected by using a match expression.
The associated data for a variant can be bound to a variable using the <code>~</code> syntax.</p>
<pre><code>let c = Circle(5.2)
let area = match c {
    Circle(~radius) -&gt; radius * radius * pi,
    Rectangle(~width, ~height) -&gt; width * height,
    Triangle(~width, ~height) -&gt; width * height * 0.5,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interfaces"><a class="header" href="#interfaces">Interfaces</a></h1>
<p>An interface is a collection of functions that operate on a type named <code>self</code>.
An interface can be implemented for multiple types.
For instance, the <code>Number</code> interface supports the add, subtract, multiply, and divide operations.
The Number interface is implemented for both <code>int</code> and <code>float</code> type. The Number could be implemented for a user-defined type.</p>
<p>Example: Implementing the ToString interface for the Person struct</p>
<pre><code>interface ToString {
    fn to_string(x: self) -&gt; string
}

type Person = {
    first_name: string,
    last_name: string,
    age: int,
}

impl ToString for Person {
    fn to_string(x: Person) -&gt; string {
        x.first_name &amp; " " &amp; x.last_name &amp; ", " x.age &amp; " years old."
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="namespaces"><a class="header" href="#namespaces">Namespaces</a></h1>
<p>Each Abra file has its own namespace. In order to use functions from another file, the <code>use</code> keyword must be used to bring them into scope.</p>
<p>cat.abra</p>
<pre><code>fn meow() -&gt; string {
    "nyan nyan nyan"
}
</code></pre>
<p>main.abra</p>
<pre><code>use cat

meow()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="foreign-functions"><a class="header" href="#foreign-functions">Foreign Functions</a></h1>
<p>Functions defined in Rust can be called from Abra. Foreign functions must be declared ahead of time, so that their types are known. The corresponding Rust function definitions use the Abra VM API to pop arguments from the stack and push a return value to the stack.</p>
<p>os.abra</p>
<pre><code>foreign fn fread(path: string) -&gt; string

foreign fn fwrite(path: string, contents: string) -&gt; string
</code></pre>
<p>os/src/lib.rs</p>
<pre><code>use abra_core::vm::Vm;
use std::fs;

#[no_mangle]
pub unsafe extern "C" fn fread(vm: *mut Vm) {
    let string_view = vm_view_string(vm);
    let path = string_view.to_owned();
    vm_pop(vm);

    let content = fs::read_to_string(path).expect("Unable to read from file");

    let string_view = StringView::from_string(&amp;content);
    vm_push_string(vm, string_view);
}

#[no_mangle]
pub unsafe extern "C" fn fwrite(vm: *mut Vm) {
    let string_view = vm_view_string(vm);
    let content = string_view.to_owned();
    vm_pop(vm);

    // TODO: make a macro for this called get_string!
    let string_view = vm_view_string(vm);
    let path = string_view.to_owned();
    vm_pop(vm);

    fs::write(path, content).expect("Unable to write to file");
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
